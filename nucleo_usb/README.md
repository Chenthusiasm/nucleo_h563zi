# nucleo_usb
## Contents
1. [Introduction](#introduction)
2. [Setup](#setup)
***
## Introduction
This project is used to test the USB CDC (communication device class) as a VCP (virtual COM port) using the NUCLEO-H563ZI dev kit.

The project uses STM's classic USB middleware which can be obtained on GitHub:
- [USB Device Middleware](https://github.com/STMicroelectronics/stm32_mw_usb_device)
- [USB Host Middleware](https://github.com/STMicroelectronics/stm32_mw_usb_host)

The USB device middleware is used.

The following [STM32 knowledge base article](https://community.st.com/t5/stm32-mcus/how-to-use-stmicroelectronics-classic-usb-device-middleware-with/ta-p/599274) provides guidance on how to use the classic USB middleware to enable VCP support over USB.
***
## Setup
In STM32CubeIDE, the NUCLEO-H563ZI board was selected for the hardware. C++ was selected for the project type.

The LEDs (`LD1`, `LD2`, `LD3`), button (`USER`), and VCP over ST-Link (`USB STLINK`) were enabled and the basic demo code was autogenerated. This adds the NUCLEO-H563ZI BSP to the project. The BSP can be found under `/Drivers/BSP/STM32H5xx_Nucleo/`.

Pressing the `USER` button toggles `LD1`, `LD2`, and `LD3`.
#### Adding the Classic USB Middleware
Per the [knowledge base article](https://community.st.com/t5/stm32-mcus/how-to-use-stmicroelectronics-classic-usb-device-middleware-with/ta-p/599274), the specific class (`/Class/CDC/`) and core (`/Core/`) source files from the [USB device middleware repo](https://github.com/STMicroelectronics/stm32_mw_usb_device) were copied into the `/Libraries/stm32_mw_usb_device/` folder in the project.

These added source files were then modified per the article.
***